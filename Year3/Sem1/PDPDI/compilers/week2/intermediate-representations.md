# Intermediate Representation

IR generation
- Final phase of the compiler front-end
- Translated the AST into code expected by the back-end
- Should allow compiling multiple source languages into multiple target languages

### Three-Address Code (TAC)
TAC is a commonly used intermediate language
- Instructions can refer to at most 3 addresses
- They contain at most one operation to the right of an instruction

#### Example
An expression of the form $a+b \times c$ would be rewritten as:
- $t_1 = b \times c$
- $t_2 = a + t_1$
where $t_1$ and $t_2$ are temporary variables

A TAC is a list of instructions referring to addresses

#### Notation
- We write x, y, z, . . . for addresses
- op for binary or unary arithmetic or logical operations
- relop for relational operators of the for <, $==$, $\geq$ etc.; 
- L for labels; 
- n for numbers

An address can be:
- a source program name (pointer to its entry in symbol table)
- a constant (number)
- a temp variable generated by the compiler

An instruction can be:
- assignment
- copy: x = y
- unconditional jump: goto L
- conditional jump: if x goto L
- indexed copy: x = y\[i\]
- address and pointer assignments: x = \*y
- procedure calls and returns: param x

#### Examples
![[Pasted image 20241121161443.png]]
![[Pasted image 20241121161723.png]]

Instructions can be represented as quadruples, triples, or indirect triples

##### Quadruple
A quardruple has 4 fields: op, $arg_1$, $arg_2$, result
- unary operations do not use $arg_2$
- param does not use $arg_2$ or result
- jumps put L in result

![[Pasted image 20241121162145.png]]

##### Triple
A triple has 3 fields: op, $arg_1$, $arg_2$
- no temp names in the result field
- rsults are referred to by their position in the table
- $t_1$ is replaced by (0)


### Single Static-Assignment
SSA is an IR that facilitates some optimisations, such as:
- dead-code elimination
- simple constant propagation

In SSA, no two assignments are for the same variable
- each new definition of a variable is modified to define a fresh variable
- each variable use is modified to use the most recently defined one

i stopped listening
my attention span can only last like 30 mins in these lectures

#### Translation to Three-Address Codes
